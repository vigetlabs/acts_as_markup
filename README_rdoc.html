<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>LICENSE</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="./README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ActsAsMarkup.html">ActsAsMarkup</a>
  
    <li><a href="./ActsAsMarkup/ActiveRecordExtension.html">ActsAsMarkup::ActiveRecordExtension</a>
  
    <li><a href="./ActsAsMarkup/ActiveRecordExtension/ClassMethods.html">ActsAsMarkup::ActiveRecordExtension::ClassMethods</a>
  
    <li><a href="./ActsAsMarkup/Railtie.html">ActsAsMarkup::Railtie</a>
  
    <li><a href="./ActsAsMarkup/UnsportedMarkdownLibrary.html">ActsAsMarkup::UnsportedMarkdownLibrary</a>
  
    <li><a href="./ActsAsMarkup/UnsportedMediawikiLibrary.html">ActsAsMarkup::UnsportedMediawikiLibrary</a>
  
    <li><a href="./ActsAsMarkup/UnsupportedMarkupLanguage.html">ActsAsMarkup::UnsupportedMarkupLanguage</a>
  
    <li><a href="./MaRuKu.html">MaRuKu</a>
  
    <li><a href="./MaRuKu/Out.html">MaRuKu::Out</a>
  
    <li><a href="./MaRuKu/Out/HTML.html">MaRuKu::Out::HTML</a>
  
    <li><a href="./BlueClothText.html">BlueClothText</a>
  
    <li><a href="./Maruku.html">Maruku</a>
  
    <li><a href="./PEGMarkdown.html">PEGMarkdown</a>
  
    <li><a href="./RDiscount.html">RDiscount</a>
  
    <li><a href="./RDocText.html">RDocText</a>
  
    <li><a href="./RDocWithHyperlinkToHtml.html">RDocWithHyperlinkToHtml</a>
  
    <li><a href="./Redcarpet.html">Redcarpet</a>
  
    <li><a href="./String.html">String</a>
  
    <li><a href="./Stringlike.html">Stringlike</a>
  
    <li><a href="./WikiClothText.html">WikiClothText</a>
  
    <li><a href="./WikitextString.html">WikitextString</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<h1 id="label-Acts+as+Markup">Acts as Markup</h1>

<p>by Brian Landau of Viget Labs &lt;viget at brian.landau.com&gt;</p>

<p>GitHub Project: <a
href="http://github.com/vigetlabs/acts_as_markup">github.com/vigetlabs/acts_as_markup</a></p>

<p>RDoc:</p>
<ul><li>
<p><a
href="http://gitrdoc.com/vigetlabs/acts_as_markup/tree/master">gitrdoc.com/vigetlabs/acts_as_markup/tree/master</a></p>
</li><li>
<p><a
href="http://vigetlabs.github.com/acts_as_markup">vigetlabs.github.com/acts_as_markup</a></p>
</li></ul>

<h2 id="label-DESCRIPTION%3A">DESCRIPTION:</h2>

<p>Allows you to specify columns of an ActiveRecord model that contain
Markdown,  Textile, Wiki text and RDoc. You may then use <code>to_s</code>
to get the original markup  text or <code>to_html</code> to get the
formated HTML.</p>

<p>Additionally you can have a model that contains a column that has a column
with  markup text, and another that defines what language to process it as.
If the field  is listed as “markdown” “textile”, “mediawiki” or “rdoc”
(case insensitive) it will  treat it as such, any other value for markup
language will have the value pass  through as a normal string.</p>

<p>This AR extension can use 3 different types of Markdown processing
backends:  BlueCloth, <a href="RDiscount.html">RDiscount</a>, Ruby PEG, <a
href="Redcarpet.html">Redcarpet</a> or <a href="Maruku.html">Maruku</a>.
You specify which one you want to use by setting a config value in your
environment.rb file:</p>

<pre>ActsAsMarkup.markdown_library = :bluecloth</pre>

<p>By default <a href="RDiscount.html">RDiscount</a> will be used.</p>

<p>You can specify additional options to pass to the markup library by using
<code>:markdown_options</code>, <code>:textile_options</code> or
<code>:mediawiki_options</code>. RDoc does not support any useful options.
The options should be given as an array of arguments. You can specify
options for multiple languages when allowing more than one. See each
library’s documentation for more details on what options are available.</p>

<h2 id="label-EXAMPLES%3A">EXAMPLES:</h2>

<h4 id="label-Using+acts_as_markdown%3A">Using acts_as_markdown:</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_markdown</span> :<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span>

<span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">first</span>)
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>     <span class="ruby-comment">#=&gt; &quot;## Markdown Headline&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_html</span>  <span class="ruby-comment">#=&gt; &quot;&lt;h2&gt; Markdown Headline&lt;/h2&gt;&quot;</span>
</pre>

<h4 id="label-Using+acts_as_textile%3A">Using acts_as_textile:</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_textile</span> :<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span>

<span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">first</span>)
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>     <span class="ruby-comment">#=&gt; &quot;h2. Textile Headline&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_html</span>  <span class="ruby-comment">#=&gt; &quot;&lt;h2&gt;Textile Headline&lt;/h2&gt;&quot;</span>
</pre>

<h4 id="label-Using+acts_as_mediawiki%3A">Using acts_as_mediawiki:</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_mediawiki</span> :<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span>

<span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">first</span>)
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>     <span class="ruby-comment">#=&gt; &quot;== Wikitext Headline ==&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_html</span>  <span class="ruby-comment">#=&gt; &quot;&lt;h2&gt;Wikitext Headline&lt;/h2&gt;&quot;</span>
</pre>

<h4 id="label-Using+acts_as_rdoc%3A">Using acts_as_rdoc:</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_rdoc</span> :<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span>

<span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">first</span>)
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>     <span class="ruby-comment">#=&gt; &quot;== RDoc Headline&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_html</span>  <span class="ruby-comment">#=&gt; &quot;&lt;h2&gt;RDoc Headline&lt;/h2&gt;&quot;</span>
</pre>

<h4 id="label-Using+acts_as_markup%3A">Using acts_as_markup:</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_markup</span> :<span class="ruby-identifier">language</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">markdown</span>, :<span class="ruby-identifier">columns</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">body</span>]
<span class="ruby-keyword">end</span>

<span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">first</span>)
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>     <span class="ruby-comment">#=&gt; &quot;## Markdown Headline&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_html</span>  <span class="ruby-comment">#=&gt; &quot;&lt;h2&gt; Markdown Headline&lt;/h2&gt;&quot;</span>
</pre>

<h4 id="label-Using+acts_as_markup+with+%3Avariable+language%3A">Using acts_as_markup with :variable language:</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_markup</span> :<span class="ruby-identifier">language</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">variable</span>, :<span class="ruby-identifier">columns</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">body</span>]
<span class="ruby-keyword">end</span>

<span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">first</span>)
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">markup_language</span>      <span class="ruby-comment"># =&gt; &quot;markdown&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>            <span class="ruby-comment"># =&gt; &quot;## Markdown Headline&quot;</span>
<span class="ruby-ivar">@post</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_html</span>         <span class="ruby-comment"># =&gt; &quot;&lt;h2&gt; Markdown Headline&lt;/h2&gt;&quot;</span>
</pre>

<h4 id="label-Using+options">Using options</h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_markdown</span> :<span class="ruby-identifier">body</span>, :<span class="ruby-identifier">markdown_options</span> =<span class="ruby-operator">&gt;</span> [ :<span class="ruby-identifier">filter_html</span> ]
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_textile</span> :<span class="ruby-identifier">body</span>, :<span class="ruby-identifier">textile_options</span> =<span class="ruby-operator">&gt;</span> [ [ :<span class="ruby-identifier">filter_html</span> ] ]
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span>
  <span class="ruby-identifier">acts_as_mediawiki</span> :<span class="ruby-identifier">body</span>, :<span class="ruby-identifier">mediawiki_options</span> =<span class="ruby-operator">&gt;</span> [ { :<span class="ruby-identifier">space_to_underscore</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> } ]
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-REQUIREMENTS%3A">REQUIREMENTS:</h2>

<p>You will need the <a
href="http://whytheluckystiff.net/ruby/redcloth/">RedCloth</a> library  for
processing the Textile text, and the <a
href="https://github.com/nricciar/wikicloth">WikiCloth</a>  library for
processing mediawiki text.</p>

<p>You will also need to install some type of Markdown processor. The four
options currently supported are:</p>
<ul><li>
<p>BlueCloth</p>
</li><li>
<p><a href="http://github.com/rtomayko/rdiscount">RDiscount</a></p>
</li><li>
<p><a href="http://github.com/rtomayko/rpeg-markdown">Ruby PEG</a></p>
</li><li>
<p><a href="http://maruku.rubyforge.org/">Maruku</a></p>
</li><li>
<p><a href="https://github.com/tanoku/redcarpet">Redcarpet</a></p>
</li></ul>

<h2 id="label-INSTALL%3A">INSTALL:</h2>

<p><code>sudo gem install acts_as_markup</code></p>

<p>Add “<code>acts_as_markup</code>” to your environment.rb:</p>

<pre>config.gem &quot;acts_as_markup&quot;</pre>

<h2 id="label-CONTRIBUTING%3A">CONTRIBUTING:</h2>

<p>Make a fork on GitHub, make your changes and do a pull request. Good places
to start are adding new Markdown libraries or new markup languages, here’s
instructions for both:</p>

<h3 id="label-Instructions+for+how+to+add+a+new+Markdown+Library%3A">Instructions for how to add a new Markdown Library:</h3>
<ol><li>
<p>Add another item to the <code>ActsAsMarkup::MARKDOWN_LIBS</code> hash in
the form of:</p>

<pre class="ruby">:<span class="ruby-identifier">bluecloth</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">class_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;BlueCloth&quot;</span>,
               :<span class="ruby-identifier">lib_name</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;bluecloth&quot;</span>}
</pre>

<p><code>:lib_name</code> should be the name needed to require the library,
while <code>:class_name</code> should be the class that we are making an
instance of.</p>
</li><li>
<p>If you need to modify the object in anyway (e.g. to add a <code>to_s</code>
or <code>to_html</code> method), add a file to the
“lib/acts_as_markup/exts/” directory.</p>
</li><li>
<p>Add appropriate tests (see current tests).</p>
</li></ol>

<h3 id="label-Instructions+for+how+to+add+a+new+Markup+Language%3A">Instructions for how to add a new Markup Language:</h3>
<ol><li>
<p>Add a “<code>when</code>” statement to the “<code>case</code>” statement in
<code>acts_as_markup</code>. The “<code>when</code>” statement should match
with a symbol that represents the language name in some way (e.g.
“<code>:markdown</code>”).</p>
</li><li>
<p>In the “<code>when</code>” block you need to set the “<code>klass</code>”
local variable and require the library and the extension file if you need
one (use the special <code>require_extensions</code> method to require
extensions).</p>
</li><li>
<p>Add the same lines you added to the previous “<code>when</code>” statement
to the “<code>:variable</code>” “<code>when</code>” statement. But replace
“<code>klass</code>” with “<code>language_klass</code>” (e.g.
“<code>markdown_klass</code>”).</p>
</li><li>
<p>Add a relevant “<code>when</code>” statement to the <code>class_eval</code>
block for the “<code>:variable</code>” language option. This should look
something like:</p>

<pre>when /markdown/i
  markup_klasses[:markdown].new self[col].to_s</pre>
</li><li>
<p>Add a convenience method (e.g. “<code>acts_as_markdown</code>”)</p>
</li><li>
<p>Add an extension file to the “lib/acts_as_markup/exts/” directory if you
need to modify the object in anyway.</p>
</li><li>
<p>Add appropriate tests (see current tests).</p>
</li></ol>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

